<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NJ Alimony & Child Support Estimator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .slider-label {
      font-weight: 500;
    }
    .result-box {
      font-size: 1.25rem;
      font-weight: bold;
      margin-top: 1rem;
    }
    .highlight {
      font-weight: 600;
      color: #0d6efd;
    }
    .input-icon {
      display: flex;
      align-items: center;
    }
    .input-icon i {
      margin-right: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="mb-4 text-center">NJ Alimony & Child Support Estimator</h1>

    <div class="mb-4">
      <label class="form-label slider-label"><i class="bi bi-currency-dollar"></i> Spouse 1 Annual Income: $<span id="spouse1IncomeLabel">100000</span></label>
      <div class="input-icon">
        <i class="bi bi-currency-dollar"></i>
        <input type="number" class="form-control mb-1" id="spouse1IncomeInput" value="100000" min="0" max="500000">
      </div>
      <input type="range" class="form-range" min="0" max="500000" step="1000" id="spouse1Income" value="100000">
    </div>

    <div class="mb-4">
      <label class="form-label slider-label"><i class="bi bi-currency-dollar"></i> Spouse 2 Annual Income: $<span id="spouse2IncomeLabel">50000</span></label>
      <div class="input-icon">
        <i class="bi bi-currency-dollar"></i>
        <input type="number" class="form-control mb-1" id="spouse2IncomeInput" value="50000" min="0" max="500000">
      </div>
      <input type="range" class="form-range" min="0" max="500000" step="1000" id="spouse2Income" value="50000">
    </div>

    <div class="mb-4">
      <label class="form-label slider-label"><i class="bi bi-people"></i> Number of Children</label>
      <select class="form-select" id="numChildren">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2" selected>2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>
    </div>

    <div id="childAges" class="mb-4">
      <input type="number" class="form-control my-1" id="childAge0" placeholder="Age of Child 1" value="5">
      <input type="number" class="form-control my-1" id="childAge1" placeholder="Age of Child 2" value="8">
    </div>

    <div class="mb-4">
      <label class="form-label slider-label"><i class="bi bi-calendar-range"></i> Length of Marriage (years)</label>
      <input type="number" class="form-control" id="marriageLength" value="10" min="0">
    </div>

    <div class="mb-4">
      <label class="form-label slider-label"><i class="bi bi-clock-history"></i> Length of Separation (years)</label>
      <input type="number" class="form-control" id="separationLength" value="1" min="0">
    </div>

    <div class="mb-4">
      <label class="form-label slider-label"><i class="bi bi-hourglass-split"></i> Parenting Time with Spouse 1: <span id="parentingTimeLabel">50</span>% (<span id="overnightsSpouse1">182.5</span> overnights)</label>
      <input type="range" class="form-range" min="0" max="100" step="1" id="parentingTime" value="50">
      <div class="form-text">Parenting Time with Spouse 2: <span id="spouse2TimeLabel">50</span>% (<span id="overnightsSpouse2">182.5</span> overnights)</div>
    </div>

    <div class="card">
      <div class="card-body">
        <p class="result-box text-center">Estimated Alimony: <span id="alimonyLabel">None</span></p>
        <p class="result-box text-center">Alimony Per Month: $<span id="alimonyMonthly">0</span></p>
        <p class="result-box text-center">Estimated Child Support (Paid by Lower Earner if Less Parenting Time): $<span id="childSupportAmount">0</span>/year ($<span id="childSupportMonthly">0</span>/mo)</p>
        <p class="result-box text-center">Estimated Alimony Duration: <span id="alimonyDuration">0</span> years â€” Total: $<span id="alimonyTotal">0</span></p>

        <hr>
        <p class="result-box text-center highlight">Spouse 1 Pays: $<span id="spouse1Pays">0</span> | Receives: $<span id="spouse1Receives">0</span> | Net: $<span id="spouse1Net">0</span></p>
        <p class="result-box text-center highlight">Spouse 2 Pays: $<span id="spouse2Pays">0</span> | Receives: $<span id="spouse2Receives">0</span> | Net: $<span id="spouse2Net">0</span></p>

        <p class="text-muted text-center">* Based on simplified NJ model and norms, not legal advice.</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const spouse1Slider = document.getElementById('spouse1Income');
    const spouse1Input = document.getElementById('spouse1IncomeInput');
    const spouse2Slider = document.getElementById('spouse2Income');
    const spouse2Input = document.getElementById('spouse2IncomeInput');
    const parentingTime = document.getElementById('parentingTime');
    const parentingTimeLabel = document.getElementById('parentingTimeLabel');
    const spouse2TimeLabel = document.getElementById('spouse2TimeLabel');
    const overnightsSpouse1 = document.getElementById('overnightsSpouse1');
    const overnightsSpouse2 = document.getElementById('overnightsSpouse2');
    const numChildren = document.getElementById('numChildren');
    const childAgesDiv = document.getElementById('childAges');
    const marriageLength = document.getElementById('marriageLength');
    const separationLength = document.getElementById('separationLength');

    const alimonyLabel = document.getElementById('alimonyLabel');
    const alimonyMonthly = document.getElementById('alimonyMonthly');
    const alimonyTotal = document.getElementById('alimonyTotal');
    const alimonyDuration = document.getElementById('alimonyDuration');
    const childSupportAmount = document.getElementById('childSupportAmount');
    const childSupportMonthly = document.getElementById('childSupportMonthly');
    const spouse1Pays = document.getElementById('spouse1Pays');
    const spouse1Receives = document.getElementById('spouse1Receives');
    const spouse1Net = document.getElementById('spouse1Net');
    const spouse2Pays = document.getElementById('spouse2Pays');
    const spouse2Receives = document.getElementById('spouse2Receives');
    const spouse2Net = document.getElementById('spouse2Net');

    function syncSliders() {
      spouse1Input.addEventListener('input', () => {
        spouse1Slider.value = spouse1Input.value;
        calculateSupport();
      });
      spouse1Slider.addEventListener('input', () => {
        spouse1Input.value = spouse1Slider.value;
        calculateSupport();
      });
      spouse2Input.addEventListener('input', () => {
        spouse2Slider.value = spouse2Input.value;
        calculateSupport();
      });
      spouse2Slider.addEventListener('input', () => {
        spouse2Input.value = spouse2Slider.value;
        calculateSupport();
      });
      parentingTime.addEventListener('input', calculateSupport);
      numChildren.addEventListener('change', calculateSupport);
      marriageLength.addEventListener('input', calculateSupport);
      separationLength.addEventListener('input', calculateSupport);
      childAgesDiv.addEventListener('input', calculateSupport);
    }

    function calculateSupport() {
      const income1 = parseInt(spouse1Slider.value);
      const income2 = parseInt(spouse2Slider.value);
      const time1 = parseInt(parentingTime.value);
      const time2 = 100 - time1;
      const overnights1 = (time1 / 100) * 365;
      const overnights2 = 365 - overnights1;
      const yearsMarried = parseInt(marriageLength.value);

      parentingTimeLabel.textContent = time1;
      spouse2TimeLabel.textContent = `${time2}`;
      overnightsSpouse1.textContent = overnights1.toFixed(1);
      overnightsSpouse2.textContent = overnights2.toFixed(1);

      const totalIncome = income1 + income2;
      const higherIncome = Math.max(income1, income2);
      const lowerIncome = Math.min(income1, income2);

      let alimony = higherIncome > lowerIncome ? (higherIncome - lowerIncome) * 0.25 : 0;
      let alimonyMonthlyVal = alimony / 12;
      let alimonyYears = yearsMarried < 20 ? Math.floor(yearsMarried / 2) : 20;
      let alimonyTotalVal = alimony * alimonyYears;

      const children = parseInt(numChildren.value);
      let childSupport = 0;
      const lowerIncomeIsSpouse1 = income1 < income2;
      const lowerParentTime = lowerIncomeIsSpouse1 ? time1 : time2;
      if (children > 0 && lowerParentTime < 50) {
        const lowerIncomeShare = lowerIncome / totalIncome;
        const baseChildCost = 17000 * children;
        childSupport = baseChildCost * lowerIncomeShare * ((50 - lowerParentTime) / 50);
      }

      const childSupportMonthlyVal = childSupport / 12;
      const spouse1PaysVal = (income1 > income2 ? alimony : 0) + (lowerIncomeIsSpouse1 && time1 < 50 ? childSupport : 0);
      const spouse2PaysVal = (income2 > income1 ? alimony : 0) + (!lowerIncomeIsSpouse1 && time2 < 50 ? childSupport : 0);
      const spouse1ReceivesVal = income1 < income2 ? alimony : 0;
      const spouse2ReceivesVal = income2 < income1 ? alimony : 0;
      const spouse1NetVal = spouse1ReceivesVal - spouse1PaysVal;
      const spouse2NetVal = spouse2ReceivesVal - spouse2PaysVal;

      alimonyLabel.textContent = higherIncome === income1 ? 'Spouse 1 pays Spouse 2' : (higherIncome === income2 ? 'Spouse 2 pays Spouse 1' : 'None');
      alimonyMonthly.textContent = Math.round(alimonyMonthlyVal).toLocaleString();
      alimonyDuration.textContent = alimonyYears;
      alimonyTotal.textContent = Math.round(alimonyTotalVal).toLocaleString();

      childSupportAmount.textContent = Math.round(childSupport).toLocaleString();
      childSupportMonthly.textContent = Math.round(childSupportMonthlyVal).toLocaleString();

      spouse1Pays.textContent = Math.round(spouse1PaysVal).toLocaleString();
      spouse2Pays.textContent = Math.round(spouse2PaysVal).toLocaleString();
      spouse1Receives.textContent = Math.round(spouse1ReceivesVal).toLocaleString();
      spouse2Receives.textContent = Math.round(spouse2ReceivesVal).toLocaleString();
      spouse1Net.textContent = Math.round(spouse1NetVal).toLocaleString();
      spouse2Net.textContent = Math.round(spouse2NetVal).toLocaleString();
    }

    syncSliders();
    calculateSupport();
  </script>
</body>
</html>
