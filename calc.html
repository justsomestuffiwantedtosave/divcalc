<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NJ Alimony & Child Support Estimator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .slider-label {
      font-weight: 500;
    }
    .result-box {
      font-size: 1.25rem;
      font-weight: bold;
      margin-top: 1rem;
    }
    .highlight {
      font-weight: 600;
      color: #0d6efd;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="mb-4 text-center">NJ Alimony & Child Support Estimator</h1>

    <!-- Inputs (Same as previous) -->
    <!-- ... SKIPPING HTML THAT REMAINS IDENTICAL FOR BREVITY ... -->

    <div class="card">
      <div class="card-body">
        <p class="result-box text-center">Estimated Alimony: <span id="alimonyLabel">None</span></p>
        <p class="result-box text-center">Alimony Per Month: $<span id="alimonyMonthly">0</span></p>
        <p class="result-box text-center">Estimated Child Support (Paid by Lower Earner if Less Parenting Time): $<span id="childSupportAmount">0</span>/year ($<span id="childSupportMonthly">0</span>/mo)</p>
        <div class="result-box">
          <p class="text-center">Estimated Total Child Support Per Child Until Age 20:</p>
          <ul id="perChildSupport" class="list-group list-group-flush text-center"></ul>
        </div>
        <p class="result-box text-center">Combined Total Child Support: $<span id="childSupportTotal">0</span> over <span id="childSupportTotalYears">0</span> years</p>

        <p class="result-box text-center">Total Combined Support (Annual): $<span id="totalSupportYearly">0</span> | Monthly: $<span id="totalSupportMonthly">0</span></p>
        <p class="result-box text-center">Estimated Alimony Duration: <span id="alimonyDuration">0</span> years â€” Total: $<span id="alimonyTotal">0</span></p>

        <hr>
        <p class="result-box text-center highlight">Spouse 1 Pays: $<span id="spouse1Pays">0</span> | Receives: $<span id="spouse1Receives">0</span> | Net: $<span id="spouse1Net">0</span></p>
        <p class="result-box text-center highlight">Spouse 2 Pays: $<span id="spouse2Pays">0</span> | Receives: $<span id="spouse2Receives">0</span> | Net: $<span id="spouse2Net">0</span></p>

        <p class="text-muted text-center">* Based on simplified NJ model and norms, not legal advice.</p>
      </div>
    </div>
  </div>

<script>
function calculateSupport() {
  const income1 = parseInt(document.getElementById('spouse1Income').value);
  const income2 = parseInt(document.getElementById('spouse2Income').value);
  const children = parseInt(document.getElementById('numChildren').value);
  const time1 = parseInt(document.getElementById('parentingTime').value);
  const time2 = 100 - time1;
  const yearsMarried = parseInt(document.getElementById('marriageLength').value);
  const yearsSeparated = parseInt(document.getElementById('separationLength').value);

  const totalIncome = income1 + income2;
  const baseChildCost = 17000 * children;
  const lowerIncome = Math.min(income1, income2);
  const higherIncome = Math.max(income1, income2);
  const lowerParentTime = income1 < income2 ? time1 : time2;

  let alimony = higherIncome > lowerIncome ? (higherIncome - lowerIncome) * 0.25 : 0;
  const alimonyMonthly = alimony / 12;
  const alimonyYears = yearsMarried < 20 ? Math.floor(yearsMarried / 2) : 20;
  const alimonyTotal = alimony * alimonyYears;

  let childSupport = 0;
  if (children > 0 && lowerParentTime < 50) {
    const lowerIncomeShare = lowerIncome / totalIncome;
    childSupport = baseChildCost * lowerIncomeShare * ((50 - lowerParentTime) / 50);
  }

  const childSupportMonthly = childSupport / 12;
  let childSupportDuration = 0;
  let perChildSupport = [];
  for (let i = 0; i < children; i++) {
    const age = parseInt(document.getElementById(`childAge${i}`)?.value || '0');
    const yearsLeft = age < 20 ? 20 - age : 0;
    childSupportDuration += yearsLeft;
    perChildSupport.push({ child: i + 1, years: yearsLeft, total: Math.round((childSupport / children) * yearsLeft) });
  }

  const totalChildSupport = childSupport * childSupportDuration / (children || 1);
  const totalSupportYearly = alimony + childSupport;
  const totalSupportMonthly = totalSupportYearly / 12;

  const spouse1Pays = (income1 > income2 ? alimony : 0) + (income1 < income2 && time1 < 50 ? childSupport : 0);
  const spouse2Pays = (income2 > income1 ? alimony : 0) + (income2 < income1 && time2 < 50 ? childSupport : 0);
  const spouse1Receives = income1 < income2 ? alimony : 0;
  const spouse2Receives = income2 < income1 ? alimony : 0;
  const spouse1Net = spouse1Receives - (spouse1Pays);
  const spouse2Net = spouse2Receives - (spouse2Pays);

  document.getElementById('alimonyLabel').textContent = higherIncome === income1 ? 'Spouse 1 pays Spouse 2' : (higherIncome === income2 ? 'Spouse 2 pays Spouse 1' : 'None');
  document.getElementById('alimonyMonthly').textContent = Math.round(alimonyMonthly).toLocaleString();
  document.getElementById('alimonyAmount').textContent = Math.round(alimony).toLocaleString();
  document.getElementById('alimonyDuration').textContent = alimonyYears;
  document.getElementById('alimonyTotal').textContent = Math.round(alimonyTotal).toLocaleString();

  document.getElementById('childSupportAmount').textContent = Math.round(childSupport).toLocaleString();
  document.getElementById('childSupportMonthly').textContent = Math.round(childSupportMonthly).toLocaleString();
  document.getElementById('childSupportTotal').textContent = Math.round(totalChildSupport).toLocaleString();
  document.getElementById('childSupportTotalYears').textContent = Math.round(childSupportDuration / (children || 1));

  document.getElementById('totalSupportYearly').textContent = Math.round(totalSupportYearly).toLocaleString();
  document.getElementById('totalSupportMonthly').textContent = Math.round(totalSupportMonthly).toLocaleString();

  document.getElementById('spouse1Pays').textContent = Math.round(spouse1Pays).toLocaleString();
  document.getElementById('spouse2Pays').textContent = Math.round(spouse2Pays).toLocaleString();
  document.getElementById('spouse1Receives').textContent = Math.round(spouse1Receives).toLocaleString();
  document.getElementById('spouse2Receives').textContent = Math.round(spouse2Receives).toLocaleString();
  document.getElementById('spouse1Net').textContent = Math.round(spouse1Net).toLocaleString();
  document.getElementById('spouse2Net').textContent = Math.round(spouse2Net).toLocaleString();

  const perChildSupportList = document.getElementById('perChildSupport');
  perChildSupportList.innerHTML = '';
  perChildSupport.forEach(c => {
    const li = document.createElement('li');
    li.className = 'list-group-item';
    li.textContent = `Child ${c.child}: $${c.total.toLocaleString()} over ${c.years} years`;
    perChildSupportList.appendChild(li);
  });
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
